{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/ibrahim/Documents/GitHub/luna-front/context/AuthContext.js"],"sourcesContent":["'use client';\nimport { useRouter } from 'next/navigation';\nimport { createContext, useState, useContext, useEffect } from 'react';\n\nconst AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [bearerKey, setBearerKey] = useState('');\n  const [isLoading, setIsLoading] = useState(true); // New state for loading\n  const router = useRouter();\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    const storedBearerKey = localStorage.getItem('bearerKey');\n\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n    }\n    if (storedBearerKey) {\n      setBearerKey(storedBearerKey);\n    }\n    setIsLoading(false); // Loading is complete\n  }, []);\n\n  useEffect(() => {\n    // Check if loading is done, and if no bearerKey or user, redirect to login\n    if (!isLoading && (!bearerKey || !user)) {\n      router.push('/login');\n    }\n  }, [bearerKey, user, isLoading, router]);\n\n  const login = (userData, token, keepLogged) => {\n    setUser(userData);\n    setBearerKey(token);\n\n    if (keepLogged) {\n      localStorage.setItem('user', JSON.stringify(userData));\n      localStorage.setItem('bearerKey', token);\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    setBearerKey('');\n\n    localStorage.clear('user');\n    localStorage.clear('bearerKey');\n    router.push('/login');\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{ user, bearerKey, login, logout, setBearerKey }}\n    >\n      {!isLoading && children}{' '}\n      {/* Render children only after loading is complete */}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD;AAEzB,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,OAAO,wBAAwB;IAC1E,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,MAAM,kBAAkB,aAAa,OAAO,CAAC;QAE7C,IAAI,YAAY;YACd,QAAQ,KAAK,KAAK,CAAC;QACrB;QACA,IAAI,iBAAiB;YACnB,aAAa;QACf;QACA,aAAa,QAAQ,sBAAsB;IAC7C,GAAG,EAAE;IAEL,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,2EAA2E;QAC3E,IAAI,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,IAAI,GAAG;YACvC,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAW;QAAM;QAAW;KAAO;IAEvC,MAAM,QAAQ,CAAC,UAAU,OAAO;QAC9B,QAAQ;QACR,aAAa;QAEb,IAAI,YAAY;YACd,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;YAC5C,aAAa,OAAO,CAAC,aAAa;QACpC;IACF;IAEA,MAAM,SAAS;QACb,QAAQ;QACR,aAAa;QAEb,aAAa,KAAK,CAAC;QACnB,aAAa,KAAK,CAAC;QACnB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YAAE;YAAM;YAAW;YAAO;YAAQ;QAAa;;YAErD,CAAC,aAAa;YAAU;;;;;;;AAI/B;AAEO,MAAM,UAAU,IAAM,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/ibrahim/Documents/GitHub/luna-front/app/providers.js"],"sourcesContent":["\"use client\";\n\nimport { SessionProvider } from \"next-auth/react\";\nimport { AuthProvider } from \"@/context/AuthContext\";\n\nexport function Providers({ children }) {\n  return (\n    <SessionProvider>\n      <AuthProvider>{children}</AuthProvider>\n    </SessionProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAAE;IACpC,qBACE,8OAAC,8IAAA,CAAA,kBAAe;kBACd,cAAA,8OAAC,sHAAA,CAAA,eAAY;sBAAE;;;;;;;;;;;AAGrB"}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}